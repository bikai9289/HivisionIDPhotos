{% set base_url = (request.headers.get('x-forwarded-proto', 'http') + '://' + request.headers.get('host')) %}
{% set title = data.title %}
{% set description = data.description %}
{% if lang == 'en' %}
  {% set canonical = base_url + '/en/spec/' + data.slug %}
{% else %}
  {% set canonical = base_url + '/spec/' + data.slug %}
{% endif %}
{% extends "base.html" %}

{% block body %}
<section class="hero">
  <div class="container">
    <h1>{{ data.h1 }}</h1>
    <p class="lead">{{ data.subtitle }}</p>
    <div class="hero-ctas">
      <a class="btn primary" href="/tool">{{ '立即开始制作' if lang != 'en' else 'Create Now' }}</a>
    </div>
  </div>
</section>

<main id="main" class="container" role="main">
  <article class="card">
    {% for sec in data.sections %}
      <h2>{{ sec.heading }}</h2>
      <p>{{ sec.body | safe }}</p>
    {% endfor %}
  </article>

  {% if data.tips %}
  <div class="grid" style="margin-top:16px">
    {% for t in data.tips %}
      <div class="card">{{ t }}</div>
    {% endfor %}
  </div>
  {% endif %}

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "inLanguage": "{{ lang }}",
    "headline": "{{ data.title }}",
    "about": "{{ data.topic }}",
    "mainEntityOfPage": "{{ canonical }}"
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "{{ base_url }}{{ '' if lang != 'en' else '/en' }}"},
      {"@type": "ListItem", "position": 2, "name": "{{ data.breadcrumb or data.h1 }}", "item": "{{ canonical }}"}
    ]
  }
  </script>
  
</main>
{% endblock %}

